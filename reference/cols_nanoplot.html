<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Nanoplots are tiny plots you can use in your gt table. They are simple by
design, mainly because there isn't a lot of space to work with. With that
simplicity, however, you do get a set of very succinct data visualizations
that adapt nicely to the amount of data you feed into them. With
cols_nanoplot() you take data from one or more columns as the basic inputs
for the nanoplots and generate a new column containing the plots.
Each nanoplot contains data points with reasonably good visibility, having
smooth connecting lines between them to allow for easier scanning of values.
By default, a nanoplot will have basic interactivity. One can hover over the
data points and vertical guides will display values ascribed to each. A
horizontal reference line is also present in the standard view (denoting
the median of the data). This reference line can be customized by providing a
static value or by choosing a keyword that computes a particular y value
using a nanoplot's data values. Aside from a reference line, there is also an
associated reference area which, by default, tries to make itself useful by
bounding the area between the lower and upper quartiles of the data. These
boundaries can also be customized in a similar fashion as the reference line.
The nanoplots are robust against missing values, and multiple strategies are
available for handling missingness.
While basic customization options are present in the cols_nanoplot(), many
more opportunities for customizing nanoplots on a more granular level are
possible with the nanoplot_options() helper function. That is to be
invoked at the options argument of cols_nanoplot(). Through that helper
function, layers of the nanoplots can be selectively removed and aesthetics
of the remaining plot components can modified."><title>Add a new column of nanoplots, taking input data from selected columns — cols_nanoplot • gt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Add a new column of nanoplots, taking input data from selected columns — cols_nanoplot"><meta property="og:description" content="Nanoplots are tiny plots you can use in your gt table. They are simple by
design, mainly because there isn't a lot of space to work with. With that
simplicity, however, you do get a set of very succinct data visualizations
that adapt nicely to the amount of data you feed into them. With
cols_nanoplot() you take data from one or more columns as the basic inputs
for the nanoplots and generate a new column containing the plots.
Each nanoplot contains data points with reasonably good visibility, having
smooth connecting lines between them to allow for easier scanning of values.
By default, a nanoplot will have basic interactivity. One can hover over the
data points and vertical guides will display values ascribed to each. A
horizontal reference line is also present in the standard view (denoting
the median of the data). This reference line can be customized by providing a
static value or by choosing a keyword that computes a particular y value
using a nanoplot's data values. Aside from a reference line, there is also an
associated reference area which, by default, tries to make itself useful by
bounding the area between the lower and upper quartiles of the data. These
boundaries can also be customized in a similar fashion as the reference line.
The nanoplots are robust against missing values, and multiple strategies are
available for handling missingness.
While basic customization options are present in the cols_nanoplot(), many
more opportunities for customizing nanoplots on a more granular level are
possible with the nanoplot_options() helper function. That is to be
invoked at the options argument of cols_nanoplot(). Through that helper
function, layers of the nanoplots can be selectively removed and aesthetics
of the remaining plot components can modified."><meta property="og:image" content="https://gt.rstudio.com/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/intro-creating-gt-tables.html">Intro</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/case-study-clinical-tables.html">Case Study: Clinical Tables</a>
    <a class="dropdown-item" href="../articles/case-study-gtcars.html">Case Study: gtcars</a>
    <a class="dropdown-item" href="../articles/creating-summary-lines.html">Creating Summary Lines</a>
    <a class="dropdown-item" href="../articles/gt-datasets.html">gt Datasets</a>
    <a class="dropdown-item" href="../articles/intro-creating-gt-tables.html">Introduction to Creating gt Tables</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/gt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Add a new column of nanoplots, taking input data from selected columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/gt/blob/HEAD/R/modify_columns.R" class="external-link"><code>R/modify_columns.R</code></a></small>
      <div class="d-none name"><code>cols_nanoplot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Nanoplots are tiny plots you can use in your <strong>gt</strong> table. They are simple by
design, mainly because there isn't a lot of space to work with. With that
simplicity, however, you do get a set of very succinct data visualizations
that adapt nicely to the amount of data you feed into them. With
<code>cols_nanoplot()</code> you take data from one or more columns as the basic inputs
for the nanoplots and generate a new column containing the plots.</p>
<p>Each nanoplot contains data points with reasonably good visibility, having
smooth connecting lines between them to allow for easier scanning of values.
By default, a nanoplot will have basic interactivity. One can hover over the
data points and vertical guides will display values ascribed to each. A
horizontal <em>reference line</em> is also present in the standard view (denoting
the median of the data). This reference line can be customized by providing a
static value or by choosing a keyword that computes a particular <em>y</em> value
using a nanoplot's data values. Aside from a reference line, there is also an
associated <em>reference area</em> which, by default, tries to make itself useful by
bounding the area between the lower and upper quartiles of the data. These
boundaries can also be customized in a similar fashion as the reference line.
The nanoplots are robust against missing values, and multiple strategies are
available for handling missingness.</p>
<p>While basic customization options are present in the <code>cols_nanoplot()</code>, many
more opportunities for customizing nanoplots on a more granular level are
possible with the <code><a href="nanoplot_options.html">nanoplot_options()</a></code> helper function. That is to be
invoked at the <code>options</code> argument of <code>cols_nanoplot()</code>. Through that helper
function, layers of the nanoplots can be selectively removed and aesthetics
of the remaining plot components can modified.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cols_nanoplot</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">columns</span>,</span>
<span>  rows <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  missing_vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gap"</span>, <span class="st">"zero"</span>, <span class="st">"remove"</span><span class="op">)</span>,</span>
<span>  reference_line <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reference_area <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  currency <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_col_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_col_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  before <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  after <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  options <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p><em>The gt table data object</em></p>
<p><code>obj:&lt;gt_tbl&gt;</code> // <strong>required</strong></p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code><a href="gt.html">gt()</a></code> function.</p></dd>


<dt>columns</dt>
<dd><p><em>Columns from which to obtain data</em></p>
<p><code>&lt;column-targeting expression&gt;</code> // <strong>required</strong></p>
<p>The columns which contain the numeric data to be plotted as nanoplots. Can
either be a series of column names provided in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>, a vector of column
indices, or a select helper function. Examples of select helper functions
include <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches()</a></code>,
<code><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">num_range()</a></code>, and <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code>. Data collected from the
columns will be concatenated together in the order of resolution.</p></dd>


<dt>rows</dt>
<dd><p><em>Rows that should contain nanoplots</em></p>
<p><code>&lt;row-targeting expression&gt;</code> // <em>default:</em> <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code></p>
<p>With <code>rows</code> we can specify which rows should contain nanoplots in the new
column. The default <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code> results in all rows in <code>columns</code> being
formatted. Alternatively, we can supply a vector of row captions within
<code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>, a vector of row indices, or a select helper function. Examples of
select helper functions include <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code>,
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">num_range()</a></code>, and <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code>.
We can also use expressions to filter down to the rows we need (e.g.,
<code>[colname_1] &gt; 100 &amp; [colname_2] &lt; 50</code>).</p></dd>


<dt>missing_vals</dt>
<dd><p><em>Treatment of missing values</em></p>
<p><code>singl-kw:[gap|zero|remove]</code> // <em>default:</em> <code>"gap"</code></p>
<p>If missing values are encountered within the input data, there are three
strategies available for their handling: (1) <code>"gap"</code> will display data gaps
at the sites of missing data, where data lines will have discontinuities;
(2) <code>"zero"</code> will replace <code>NA</code> values with zero values; and (3) <code>"remove"</code>
will remove any incoming <code>NA</code> values.</p></dd>


<dt>reference_line</dt>
<dd><p><em>Add a reference line</em></p>
<p><code>scalar&lt;numeric|integer|character&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>Supplying a single value here will add a horizontal reference line. It
could be a static numeric value, applied to all nanoplots generated. Or,
the input can be one of the following for generating the line from the
underlying data: (1) <code>"mean"</code>, (2) <code>"median"</code>, (3) <code>"min"</code>, (4) <code>"max"</code>,
(5) <code>"first"</code>, or (6) <code>"last"</code>.</p></dd>


<dt>reference_area</dt>
<dd><p><em>Add a reference area</em></p>
<p><code>vector&lt;numeric|integer|character&gt;|list</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>A reference area requires two inputs to define bottom and top boundaries
for a rectangular area. The types of values supplied are the same as those
expected for <code>reference_line</code>, which is either a static numeric value or
one of the following keywords for the generation of the value: (1)
<code>"mean"</code>, (2) <code>"median"</code>, (3) <code>"min"</code>, (4) <code>"max"</code>, (5) <code>"first"</code>, or (6)
<code>"last"</code>. Input can either be a vector or list with two elements.</p></dd>


<dt>currency</dt>
<dd><p><em>Define values as currencies of a specific type</em></p>
<p><code>scalar&lt;character&gt;|obj:&lt;gt_currency&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>If the values are to be displayed as currency values, supply either: (1) a
3-letter currency code (e.g., <code>"USD"</code> for U.S. Dollars, <code>"EUR"</code> for the
Euro currency), (2) a common currency name (e.g., <code>"dollar"</code>, <code>"pound"</code>,
<code>"yen"</code>, etc.), or (3) an invocation of the <code><a href="currency.html">currency()</a></code> helper function
for specifying a custom currency (where the string could vary across output
contexts). Use <code><a href="info_currencies.html">info_currencies()</a></code> to get an information table with all of
the valid currency codes, and examples of each, for the first two cases.</p></dd>


<dt>new_col_name</dt>
<dd><p><em>Column name for the new column containing the plots</em></p>
<p><code>scalar&lt;character&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>A single column name in quotation marks. Values will be extracted from this
column and provided to compatible arguments. If not provided the new column
name will be <code>"nanoplots"</code>.</p></dd>


<dt>new_col_label</dt>
<dd><p><em>Column label for the new column containing the plots</em></p>
<p><code>scalar&lt;character&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>A single column label. If not supplied then the column label will inherit
from <code>new_col_name</code> (if nothing provided to that argument, the label will
be <code>"nanoplots"</code>).</p></dd>


<dt>before, after</dt>
<dd><p><em>Column used as anchor</em></p>
<p><code>&lt;column-targeting expression&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>A single column-resolving expression or column index can be given to either
<code>before</code> or <code>after</code>. The column specifies where the new column containing
the nanoplots should be positioned among the existing columns in the input
data table. While select helper functions such as <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code> and
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code> can be used for column targeting, it's recommended that a
single column name or index be used. This is to ensure that exactly one
column is provided to either of these arguments (otherwise, the function
will be stopped). If nothing is provided for either argument then the new
column will be placed at the end of the column series.</p></dd>


<dt>height</dt>
<dd><p><em>The height of the nanoplots</em></p>
<p><code>scalar&lt;character&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>The height of the nanoplots. If nothing is provided here then <strong>gt</strong> will
provide a sensible length value of <code>"1.5em"</code>.</p></dd>


<dt>options</dt>
<dd><p><em>Set options for the nanoplots</em></p>
<p><code>obj:&lt;nanoplot_options</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>By using the <code><a href="nanoplot_options.html">nanoplot_options()</a></code> helper function here, you can alter the
layout and styling of the nanoplots in the new column.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>gt_tbl</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="targeting-cells-with-columns-and-rows">Targeting cells with <code>columns</code> and <code>rows</code><a class="anchor" aria-label="anchor" href="#targeting-cells-with-columns-and-rows"></a></h2>
    


<p>Targeting of values to insert into the nanoplots is done through <code>columns</code>
and additionally by <code>rows</code> (if nothing is provided for <code>rows</code> then entire
columns are selected). Aside from declaring column names in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> (with bare
column names or names in quotes) we can use also
<strong>tidyselect</strong>-style expressions. This can be as basic as supplying a select
helper like <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, or, providing a more complex incantation like</p>
<p><code>where(~ is.numeric(.x) &amp;&amp; max(.x, na.rm = TRUE) &gt; 1E6)</code></p>
<p>which targets numeric columns that have a maximum value greater than
1,000,000 (excluding any <code>NA</code>s from consideration).</p>
<p>Once the columns are targeted, we may also target the <code>rows</code> within those
columns. This can be done in a variety of ways. If a stub is present, then we
potentially have row identifiers. Those can be used much like column names in
the <code>columns</code>-targeting scenario. We can use simpler <strong>tidyselect</strong>-style
expressions (the select helpers should work well here) and we can use quoted
row identifiers in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>. It's also possible to use row indices (e.g.,
<code>c(3, 5, 6)</code>) though these index values must correspond to the row numbers of
the input data (the indices won't necessarily match those of rearranged rows
if row groups are present). One more type of expression is possible, an
expression that takes column values (can involve any of the available columns
in the table) and returns a logical vector.</p>
    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    


<p>Let's make some nanoplots with the <code><a href="illness.html">illness</a></code> dataset. The columns beginning
with 'day' all contain ordered measurement values, comprising seven
individual daily results. Using <code>cols_nanoplot()</code> we create a new column to
hold the nanoplots (with <code>new_col_name = "nanoplots"</code>), referencing the
columns containing the data (with <code>columns = starts_with("day")</code>). It's also
possible to define a column label here using the <code>new_col_label</code> argument.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">illness</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span>rowname_col <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_header.html">tab_header</a></span><span class="op">(</span><span class="st">"Partial summary of daily tests performed on YF patient"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_stubhead.html">tab_stubhead</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"**Test**"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_hide.html">cols_hide</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"norm"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"day"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_units.html">fmt_units</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">units</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_nanoplot.html">cols_nanoplot</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"day"</span><span class="op">)</span>,</span>
<span>    new_col_name <span class="op">=</span> <span class="st">"nanoplots"</span>,</span>
<span>    new_col_label <span class="op">=</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"*Progression*"</span><span class="op">)</span>,</span>
<span>    options <span class="op">=</span> <span class="fu"><a href="../reference/nanoplot_options.html">nanoplot_options</a></span><span class="op">(</span></span>
<span>      show_reference_line <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      show_reference_area <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_align.html">cols_align</a></span><span class="op">(</span>align <span class="op">=</span> <span class="st">"center"</span>, columns <span class="op">=</span> <span class="va">nanoplots</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_merge.html">cols_merge</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">test</span>, <span class="va">units</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"{1} ({2})"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_footnote.html">tab_footnote</a></span><span class="op">(</span></span>
<span>    footnote <span class="op">=</span> <span class="st">"Measurements from Day 3 through to Day 8."</span>,</span>
<span>    locations <span class="op">=</span> <span class="fu"><a href="../reference/cells_column_labels.html">cells_column_labels</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">nanoplots</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_nanoplot_1.png" alt="This image of a table was generated from the first code example in the `cols_nanoplot()` help file." style="width:100%;"></p>
<p>Now we'll make another table that contains two columns of nanoplots. Starting
from the <code><a href="towny.html">towny</a></code> dataset, we first reduce it down to a subset of columns
and rows. All of the columns related to either population or density will be
used as input data for the two nanoplots. Both nanoplots will use a reference
line that is generated from the median of the input data. And by naming the
new nanoplot-laden columns in a similar manner as the input data columns, we
can take advantage of select helpers (e.g., when using <code><a href="tab_spanner.html">tab_spanner()</a></code>). Many
of the input data columns are now redundant because of the plots, so we'll
elect to hide most of those with <code><a href="cols_hide.html">cols_hide()</a></code>.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">towny</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"population"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"density"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">population_2021</span> <span class="op">&gt;</span> <span class="fl">200000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">population_2021</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_integer.html">fmt_integer</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"population"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_number.html">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"density"</span><span class="op">)</span>, decimals <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_nanoplot.html">cols_nanoplot</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"population"</span><span class="op">)</span>,</span>
<span>    reference_line <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>    reference_area <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    new_col_name <span class="op">=</span> <span class="st">"population_plot"</span>,</span>
<span>    new_col_label <span class="op">=</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"*Change*"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_nanoplot.html">cols_nanoplot</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"density"</span><span class="op">)</span>,</span>
<span>    reference_line <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>    reference_area <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    new_col_name <span class="op">=</span> <span class="st">"density_plot"</span>,</span>
<span>    new_col_label <span class="op">=</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"*Change*"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_hide.html">cols_hide</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"2001|2006|2011|2016"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Population"</span>,</span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"population"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Density ({{*persons* km^-2}})"</span>,</span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"density"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_label_with.html">cols_label_with</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span>,</span>
<span>    fn <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\D+"</span>, <span class="st">""</span>, <span class="va">x</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_align.html">cols_align</a></span><span class="op">(</span>align <span class="op">=</span> <span class="st">"center"</span>, columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_width.html">cols_width</a></span><span class="op">(</span></span>
<span>    <span class="va">name</span> <span class="op">~</span> <span class="fu"><a href="../reference/px.html">px</a></span><span class="op">(</span><span class="fl">140</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="../reference/px.html">px</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/opt_horizontal_padding.html">opt_horizontal_padding</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_nanoplot_2.png" alt="This image of a table was generated from the second code example in the `cols_nanoplot()` help file." style="width:100%;"></p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>
    

<p>5-8</p>
    </div>
    <div class="section level2">
    <h2 id="function-introduced">Function Introduced<a class="anchor" aria-label="anchor" href="#function-introduced"></a></h2>
    

<p><em>In Development</em></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other column modification functions: 
<code><a href="cols_add.html">cols_add</a>()</code>,
<code><a href="cols_align_decimal.html">cols_align_decimal</a>()</code>,
<code><a href="cols_align.html">cols_align</a>()</code>,
<code><a href="cols_hide.html">cols_hide</a>()</code>,
<code><a href="cols_label_with.html">cols_label_with</a>()</code>,
<code><a href="cols_label.html">cols_label</a>()</code>,
<code><a href="cols_merge_n_pct.html">cols_merge_n_pct</a>()</code>,
<code><a href="cols_merge_range.html">cols_merge_range</a>()</code>,
<code><a href="cols_merge_uncert.html">cols_merge_uncert</a>()</code>,
<code><a href="cols_merge.html">cols_merge</a>()</code>,
<code><a href="cols_move_to_end.html">cols_move_to_end</a>()</code>,
<code><a href="cols_move_to_start.html">cols_move_to_start</a>()</code>,
<code><a href="cols_move.html">cols_move</a>()</code>,
<code><a href="cols_unhide.html">cols_unhide</a>()</code>,
<code><a href="cols_units.html">cols_units</a>()</code>,
<code><a href="cols_width.html">cols_width</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Richard Iannone, Joe Cheng, Barret Schloerke, Ellis Hughes, Alexandra Lauer, <a href="https://jooyoungseo.github.io/" class="external-link">JooYoung Seo</a>, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

